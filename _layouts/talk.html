{% include partials/header.html %}

  {% assign talk = page %}

  <div class="d-flex flex-lg-row flex-column container-fluid mb-2 p-0">
    <div class="h6 mt-2 mb-0 mr-1 pr-1 pb-1">
      {% include partials/get_main_category.html %}
      <span class="p-1 pl-2 pr-2 border-soft-{{ main_cat_color }} bg-soft-{{ main_cat_color }} font-weight-normal">
        {{ main_cat }}
      </span>
    </div>

    {% if talk.categories.size > 1 %}
      <div class="h6 mt-2 mb-0 ml-1 pr-1 pb-1">
        {% for cat in talk.categories %}
          {% if cat != main_cat %}
            <span class="mr-2">{{ cat }}</span>
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </div>

  <h1 class="font-weight-light">{{ talk.name }}</h1>

  <p class="mb-3 font-weight-light">
    {% include partials/list_speakers.html %}
  </p>

  <div class="mb-3 p-0">
    {% for r in site.data.program %}
      {% for t in r.talks %}
        {% if talk.name == t.name %}

          {% include partials/get_talk_time.html %}
          <span class="d-none d-sm-inline">
            {{ site.data.lang[site.conference.lang].pronoun.at }}
          </span>
          {% include partials/show_talk_time.html %}

          {% assign room = site.rooms | where: 'name', r.room | first %}
          <span class="d-none d-sm-inline ml-1">
            {{ site.data.lang[site.conference.lang].pronoun.in }}
          </span>
          {% include partials/show_room.html %}

          <span class="d-none d-sm-inline ml-1">
            {{ site.data.lang[site.conference.lang].pronoun.for }}
          </span>
          {% include partials/show_talk_duration.html %}

        {% endif %}
      {% endfor %}
    {% endfor %}
  </div>

  {{ content }}

  {% assign has_icon_links = false %}
  {% assign has_regular_links = false %}
  {% assign has_iframe_links = false %}
  {% for link in talk.links %}
    {% if link.icon %}
      {% assign has_icon_links = true %}
    {% else %}
      {% assign has_regular_links = true %}
    {% endif %}
  {% endfor %}

  {% if has_icon_links %}
    <ul class="list-unstyled">
      {% for link in talk.links %}
        {% if link.icon %}
          <li class="mb-1 ml-2">
            {% include partials/get_link_href.html %}
            {% if link.iframe %}
              <a class="cursor-pointer" data-toggle="modal" data-target="#link-modal" data-title="{{ link.name }}" data-href="{{ link_href }}">
            {% else %}
              <a href="{{ link_href }}">
            {% endif %}
              <i class="fas fa-{{ link.icon }} pr-1"></i>
              {{ link.name }}
            </a>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  {% endif %}

  {% if has_regular_links %}
    <h5 class="mt-4 mb-1">{{ site.data.lang[site.conference.lang].more_information }}:</h5>

    <ul class="list-unstyled">
      {% for link in talk.links %}
        {% unless link.icon %}
          <li class="mb-1 ml-2 pl-2 border-soft-primary">
            {% include partials/get_link_href.html %}
            {% if link.iframe %}
              <a class="cursor-pointer text-reset" data-toggle="modal" data-target="#link-modal" data-title="{{ link.name }}" data-href="{{ link_href }}">
            {% else %}
              <a class="text-reset" href="{{ link_href }}">
            {% endif %}
              {{ link.name }}
            </a>
          </li>
        {% endunless %}
      {% endfor %}
    </ul>
  {% endif %}

  <div class="modal fade" id="link-modal" tabindex="-1" role="dialog" aria-labelledby="link-modal-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="link-modal-label"></h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <iframe src="" frameborder="0" allowfullscreen></iframe>
        </div>
        <div class="modal-footer">
          <p class="modal-description"></p>
        </div>
      </div>
    </div>
  </div>

  <p class="d-print-none mt-5">
    <a href="{{ page.collection | prepend: '/' | prepend: site.baseurl }}" class="btn btn-light">
      <i class="fas fa-bullhorn"></i>
      {{ site.data.lang[site.conference.lang].overview }}
    </a>

    <a href="{{ site.conference.program.url | prepend: site.baseurl }}" class="btn btn-light">
      <i class="far fa-calendar-alt"></i>
      {{ site.data.lang[site.conference.lang].program.title }}
    </a>
  </p>

{% include partials/footer.html %}
